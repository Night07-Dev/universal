--[[
	–§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø –° –ö–û–ü–ò–†–û–í–ê–ù–ò–ï–ú –õ–û–ì–û–í
	
	–°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—É—é –ø–∞–Ω–µ–ª—å —Å –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏:
	1. [C] - –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
	2. [üìã] - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.
	
	–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –ü–ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
]]

-- –°–µ—Ä–≤–∏—Å—ã
local UserInputService = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")
local StarterGui = game:GetService("StarterGui")
local Players = game:GetService("Players")
local LogService = game:GetService("LogService")

-- --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è ---
local MAX_LOGS = 250 -- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏
local capturedLogs = {} -- –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤

local isDragging = false
local consoleVisible = false
local dragStartPos = nil
local frameStartPixelPos = nil

-- --- –°–±–æ—Ä –ª–æ–≥–æ–≤ ---
-- –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
LogService.MessageOut:Connect(function(message, messageType)
	-- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–≥–æ –æ–Ω–æ —Ç–∏–ø–∞ (Info, Warning, Error)
	local formattedMessage = string.format("[%s]: %s", tostring(messageType), message)
	table.insert(capturedLogs, formattedMessage)
	
	-- –ï—Å–ª–∏ –ª–æ–≥–æ–≤ —Å—Ç–∞–ª–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, —É–¥–∞–ª—è–µ–º —Å–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
	if #capturedLogs > MAX_LOGS then
		table.remove(capturedLogs, 1)
	end
end)

-- --- –°–æ–∑–¥–∞–Ω–∏–µ GUI ---
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ConsoleUtilsGui"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—É—é –ø–∞–Ω–µ–ª—å (—Ñ—Ä–µ–π–º), –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –∏ –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å
local mainFrame = Instance.new("Frame")
mainFrame.Name = "DraggableFrame"
mainFrame.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
mainFrame.BorderColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 2
mainFrame.Size = UDim2.fromOffset(95, 45) -- –®–∏—Ä–∏–Ω–∞ –¥–ª—è –¥–≤—É—Ö –∫–Ω–æ–ø–æ–∫ + –æ—Ç—Å—Ç—É–ø
mainFrame.Position = UDim2.new(1, -105, 1, -55) -- –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
mainFrame.AnchorPoint = Vector2.new(1, 1)
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- –ò—Å–ø–æ–ª—å–∑—É–µ–º UIListLayout –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ —Ñ—Ä–µ–π–º–∞
local layout = Instance.new("UIListLayout")
layout.FillDirection = Enum.FillDirection.Horizontal
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.VerticalAlignment = Enum.VerticalAlignment.Center
layout.Padding = UDim.new(0, 5)
layout.Parent = mainFrame

-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Å–æ–ª–∏
local consoleButton = Instance.new("TextButton")
consoleButton.Name = "ConsoleToggleButton"
consoleButton.LayoutOrder = 1
consoleButton.Size = UDim2.fromOffset(40, 40)
consoleButton.Font = Enum.Font.SourceSansBold
consoleButton.Text = "C"
consoleButton.TextSize = 24
consoleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
consoleButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
consoleButton.Parent = mainFrame

local consoleBtnCorner = Instance.new("UICorner")
consoleBtnCorner.CornerRadius = UDim.new(0, 6)
consoleBtnCorner.Parent = consoleButton

-- –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤
local copyButton = Instance.new("TextButton")
copyButton.Name = "CopyLogsButton"
copyButton.LayoutOrder = 2
copyButton.Size = UDim2.fromOffset(40, 40)
copyButton.Font = Enum.Font.SourceSansBold
copyButton.Text = "üìã" -- –≠–º–æ–¥–∑–∏ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
copyButton.TextSize = 24
copyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
copyButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
copyButton.Parent = mainFrame

local copyBtnCorner = Instance.new("UICorner")
copyBtnCorner.CornerRadius = UDim.new(0, 6)
copyBtnCorner.Parent = copyButton

-- --- –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–æ–∫ –∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è ---

-- –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Å–æ–ª–∏
local function toggleConsole()
	consoleVisible = not consoleVisible
	StarterGui:SetCore("DevConsoleVisible", consoleVisible)
end

-- –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤
local function copyLogsToClipboard()
	if #capturedLogs > 0 then
		local fullLogString = table.concat(capturedLogs, "\n")
		local success = pcall(function()
			GuiService:SetClipboard(fullLogString)
		end)
		
		-- –î–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
		local originalText = copyButton.Text
		if success then
			copyButton.Text = "‚úÖ" -- –ì–∞–ª–æ—á–∫–∞
		else
			copyButton.Text = "‚ùå" -- –ö—Ä–µ—Å—Ç–∏–∫ (–≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏)
		end
		
		task.delay(1.5, function()
			copyButton.Text = originalText
		end)
	else
		-- –ï—Å–ª–∏ –ª–æ–≥–æ–≤ –Ω–µ—Ç, —Ç–æ–∂–µ —Å–æ–æ–±—â–∞–µ–º
		local originalText = copyButton.Text
		copyButton.Text = "..."
		task.delay(1.5, function()
			copyButton.Text = originalText
		end)
	end
end

-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∫ —Å–æ–±—ã—Ç–∏—è–º –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–∞–º
consoleButton.MouseButton1Click:Connect(toggleConsole)
copyButton.MouseButton1Click:Connect(copyLogsToClipboard)


-- --- –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –≤—Å–µ–π –ø–∞–Ω–µ–ª–∏ ---

-- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –ø–∞–Ω–µ–ª—å
mainFrame.InputBegan:Connect(function(input)
	-- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –≤–Ω—É—Ç—Ä–∏ (—á—Ç–æ–±—ã –Ω–µ –Ω–∞—á–∏–Ω–∞—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		if input.UserInputState == Enum.UserInputState.Begin then
			isDragging = true
			dragStartPos = input.Position
			frameStartPixelPos = mainFrame.AbsolutePosition
			
			-- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
			mainFrame.AnchorPoint = Vector2.new(0, 0)
			mainFrame.Position = UDim2.fromOffset(frameStartPixelPos.X, frameStartPixelPos.Y)
		end
	end
end)

-- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—É—Å–∫–∞–µ—Ç –ø–∞–ª–µ—Ü/–∫–Ω–æ–ø–∫—É –º—ã—à–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ
UserInputService.InputEnded:Connect(function(input)
	if isDragging and (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
		isDragging = false
	end
end)

-- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–∏–≥–∞–µ—Ç –ø–∞–ª—å—Ü–µ–º/–º—ã—à—å—é
UserInputService.InputChanged:Connect(function(input)
	if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStartPos
		local newPixelPos = frameStartPixelPos + delta
		
		local screenBounds = screenGui.AbsoluteSize
		local frameSize = mainFrame.AbsoluteSize
		
		local clampedX = math.clamp(newPixelPos.X, 0, screenBounds.X - frameSize.X)
		local clampedY = math.clamp(newPixelPos.Y, 0, screenBounds.Y - frameSize.Y)
		
		mainFrame.Position = UDim2.fromOffset(clampedX, clampedY)
	end
end)
